<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Składnia async/await</h1>
    <p>
        Funkcje asynchroniczne (async/await) to wygodny sposób na pisanie kodu asynchronicznego, który wygląda jak synchroniczny. Składnia async/await opiera się na obietnicach, więc nie blokuje głównego wątku programu.
    </p>
    <p>
        Aby zadeklarować asynchroniczną funkcję strzałkową, dodaj słowo kluczowe async przed listą parametrów. Wewnątrz możesz użyć operatora await i umieścić coś po jego prawej stronie, co zwróci obietnicę. Metoda response.json() również zwraca obietnicę, więc umieszczamy await.
    </p>
    <script>
const fetchUsers = async () => {
  const response = await fetch("https://jsonplaceholder.typicode.com/users");
  const users = await response.json();
  return users;
};

fetchUsers().then(users => console.log(users));
    </script>
    <p>
        Kiedy interpreter napotka await, zawiesza wykonanie tej funkcji (nie całego skryptu) i czeka na wykonanie obietnicy po prawej stronie await. Gdy tylko obietnica zostanie spełniona, wykonanie funkcji jest wznawiane i w wierszu poniżej dostępny jest dla nas wynik operacji asynchronicznej.
    </p>
    <ul>
        <li>Operator await może być użyty tylko w treści funkcji asynchronicznej (async)</li>
        <li>Operator await zawiesza funkcję do czasu spełnienia obietnicy (fulfilled lub rejected).</li>
        <li>Jeśli obietnica została spełniona (fulfilled), operator await zwróci jej wartość.</li>
        <li>Jeśli obietnica została odrzucona (rejected), operator await zgłosi błąd.</li>
        <li>Funkcja asynchroniczna zawsze zwraca obietnicę, więc każda zwracana wartość będzie jej wartością.</li>
        <li>Jeśli nie określisz wartości zwracanej, zostanie zwrócona obietnica o wartości undefined.</li>
    </ul>
    <p>Każda funkcja może być asynchroniczna, nie ważne czy to metoda obiektu, klasy, callback, deklaracja czy funkcja wbudowana. Wszystkie będą mogły używać operatora await i na pewno zwrócą obietnicę, ponieważ będą to funkcje asynchroniczne.</p>
    <script>
        // Function declaration
async function foo() {
  // ...
}

// Functional expression
const foo = async function () {
  // ...
};

// Arrow function
const foo = async () => {
  // ...
};

// Object method
const user = {
  async foo() {
    // ...
  },
};

// Class method
class User {
  async foo() {
    // ...
  }
}
    </script>
</body>
</html>